â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â•â•
     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â•â•â•â–ˆâ–ˆâ•‘
     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
     â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â• â•šâ•â•â•â•â•â•â•  v5.0

  ğŸš€ AEGIS PROTOCOL: THE INSTITUTIONAL AI FIREWALL
  Zero-Custody Account Abstraction on Base Sepolia

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  We have upgraded from EOA wallets to ERC-4337 Smart Accounts.
  This live demo features:
    1. Zero-Custody ERC-7579 Modules
    2. Scoped ERC-7715 AI Session Keys
    3. Intents via Pimlico's Cloud Bundler
    4. LIVE Chainlink CRE AI Consensus

[Act 1] The Bank: Verifying Zero-Custody Treasury
  Checking AegisModule treasury (0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89)... |/-\|/-\|/-\|/-\|   âœ… AegisModule treasury: 0.085 ETH
  â„¹ï¸  The module has execution rights but the owner controls all funds.

[Act 2] The Keys: Subscribing AI Agents

  Subscribing Agent NOVA (0.05 ETH budget)...
> cast send 0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89 "subscribeAgent(address,uint256)" 0xba5359fac9736e687c39d9613de3e8fa6c7af1ce 50000000000000000
  Broadcasting subscribeAgent(NOVA)... |/-\|/-\|/-\|/-\|   âœ… NOVA subscribed â€” tx: 0x0000000000000000â€¦
  Subscribing Agent CIPHER (0.008 ETH budget)...
> cast send 0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89 "subscribeAgent(address,uint256)" 0x6e9972213bf459853fa33e28ab7219e9157c8d02 8000000000000000
  Broadcasting subscribeAgent(CIPHER)... |/-\|/-\|/-\|/-\|/-   âœ… CIPHER subscribed â€” tx: 0x02b50eb3b6895399â€¦

  Both agents are now registered on-chain. Here's what their session keys permit:

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ERC-7715 Session Key â€” Agent NOVA                            â”‚
  â”‚                                                                â”‚
  â”‚  Permitted Selectors:                                          â”‚
  â”‚    requestAudit(address)                0xe34eac65          â”‚
  â”‚    triggerSwap(address,uint256,uint256)  0x684bceb0          â”‚
  â”‚                                                                â”‚
  â”‚  Target:  0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89      â”‚
  â”‚  Budget:  0.05 ETH (enforced on-chain)                         â”‚
  â”‚  Expiry:  24 hours                                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  NOVA cannot call transfer(), withdraw(), or any other function.
  âœ… Both agents subscribed. Session keys scoped and validated.

[Act 3] The Intents: Agent NOVA Requesting Audits

> cast send 0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89 "requestAudit(address)" 0x46d40e0aBdA0814bb0CB323B2Bb85a129d00B0AC
  Routing audit intent to Base Sepolia... |/-\|/-\|/-\|/-\|/-   âœ… MockBRETT audit requested: 0x2d63f17f997d3520e7ee75568a8a8a67b626c33d86f6f1f00ecf2b7fb6197f29

> cast send 0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89 "requestAudit(address)" 0xf672c8fc888b98db5c9662d26e657417a3c453b5
  Routing audit intent to Base Sepolia... |/-\|/-\|/-\|/-\|/   âœ… MockHoneypot audit requested: 0xb595f8b8fb51cd88ffdcdb9cfdc3dc8315fc09c5e39c1df910437d153947f8fa

  Both AuditRequested events are now on-chain on Base Sepolia.

[Act 4] The AI Firewall: LIVE Chainlink CRE Intercept

> docker exec -e AEGIS_DEMO_MODE=true aegis-oracle-node cre workflow simulate /app --target base-sepolia --evm-tx-hash 0xb595f8b8fb51cd88ffdcdb9cfdc3dc8315fc09c5e39c1df910437d153947f8fa --trigger-index 0 --evm-event-index 0 --non-interactive

--- BEGIN RAW SECURE WASM EXECUTION ---

Error response from daemon: container 55f9e32e84d7b13b0828ed90ebf2117bd38c4a19c090f5fd228cc26bc45b43de is not running

--- END RAW SECURE WASM EXECUTION ---

  Delivering oracle verdicts to blockchain...
  Delivering BRETT verdict (riskScore=0)... |/-\|/-\|/-\   âœ… MockBRETT:    Risk Code 0 â†’ APPROVED (isApproved = true)
  Delivering Honeypot verdict (riskScore=36)... |/-\|/-\|/-\|   âŒ MockHoneypot: Risk Code 36 â†’ DENIED (ClearanceDenied)

[Act 5] The Execution: JIT Swaps & Automated Reverts
Agent NOVA now attempts to execute both swaps against the firewall.

> triggerSwap(MockBRETT, 0.001 ETH)
  Submitting swap transaction... |/-\|/-\|/-\|/-\|/-\|/-\   âœ… SWAP EXECUTED. MockBRETT cleared by AI. Tx: 0x0000000000000000000000000000000000000000000000000000000000000000

> triggerSwap(MockHoneypot, 0.001 ETH)
  Submitting swap transaction... |/-\|/-\|/-\|/-\|/-\|/-\| 
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘  EXECUTION REVERTED: TokenNotCleared()                    â•‘
  â•‘                                                            â•‘
  â•‘  The AegisModule BLOCKED the honeypot swap.                â•‘
  â•‘  Zero capital at risk. The AI firewall held.               â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ğŸ›¡ï¸ The AegisModule successfully blocked the malicious transaction on-chain.

[Act 6] Budget Verification
> cast call 0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89 "agentAllowances(address)" 0xba5359fac9736e687c39d9613de3e8fa6c7af1ce
  ğŸ“Š NOVA remaining budget: 0x00000000000000000000000000000000000000000000000000b1a2bc2ec50000
  â„¹ï¸  Budget is mathematically enforced â€” NOVA cannot exceed its allowance.
> cast call 0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89 "agentAllowances(address)" 0x6e9972213bf459853fa33e28ab7219e9157c8d02
  ğŸ“Š CIPHER remaining budget: 0x000000000000000000000000000000000000000000000000001c6bf526340000

[Act 7] The Kill Switch
  First, subscribing Agent REX (0.01 ETH budget)...
  âœ… REX subscribed â€” budget: 0.01 ETH
  ğŸ”´ Now revoking Agent REX...
> cast send 0x23EfaEF29EcC0e6CE313F0eEd3d5dA7E0f5Bcd89 "revokeAgent(address)" 0x7b1afe2745533d852d6fd5a677f14c074210d896
  Broadcasting revokeAgent(REX)... |/-\|/-\|/-\|/-\|/   âœ… Agent REX REVOKED â€” budget zeroed, access denied
  â„¹ï¸  REX allowance after revoke: 0x0000000000000000000000000000000000000000000000000000000000000000 (should be 0)
  ğŸ›¡ï¸ The kill switch works. REX has zero access.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 âœ… DEMO COMPLETE: FULL AGENT LIFECYCLE ON BASE SEPOLIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… subscribeAgent  â€” Owner grants NOVA + CIPHER budgets  â”‚
  â”‚ âœ… requestAudit    â€” Agent submits trade intents          â”‚
  â”‚ âœ… CRE Oracle      â€” GoPlus + BaseScan + GPT-4o + Llama  â”‚
  â”‚ âœ… onReportDirect  â€” Oracle delivers 8-bit risk verdict   â”‚
  â”‚ âœ… triggerSwap     â€” JIT swap executes for clean tokens   â”‚
  â”‚ âŒ TokenNotCleared â€” Honeypot swap BLOCKED on-chain      â”‚
  â”‚ âœ… agentAllowances â€” Budget deducted after successful tx  â”‚
  â”‚ âœ… revokeAgent     â€” Owner kills REX access instantly     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ STACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                                          â”‚
  â”‚  MockBRETT:     requestAudit â†’ CRE Risk 0  â†’ triggerSwap âœ… SUCCESS     â”‚
  â”‚  MockHoneypot:  requestAudit â†’ CRE Risk 36 â†’ triggerSwap âŒ REVERT      â”‚
  â”‚                                                                          â”‚
  â”‚  Stack: ERC-4337 + ERC-7579 + Chainlink CRE + Pimlico Bundler           â”‚
  â”‚  Chain: Base Sepolia (84532)                                             â”‚
  â”‚  Oracle: GoPlus + BaseScan + GPT-4o + Llama-3 (dual-AI consensus)       â”‚
  â”‚                                                                          â”‚
  â”‚  Zero-Custody. Zero-Trust. Total Protection.                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

