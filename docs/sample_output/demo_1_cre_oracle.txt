  ğŸ” Checking Tenderly VNet health...
  âœ… VNet healthy (block: 42712447)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ”— AEGIS PROTOCOL V4  Â·  DEMO 1: THE AI BLACK BOX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Targets:  CRE & AI (\) | Privacy (\) | Autonomous Agents (\)

  In this demo we fire a real on-chain event and watch the Chainlink
  Runtime Environment  â€”  running inside a WASM sandbox with API keys
  NEVER LEAVING the Decentralized Oracle Network  â€”  audit the token
  using GoPlus static analysis + GPT-4o + Llama-3 AI consensus.

  AegisModule:  0x46d40e0aBdA0814bb0CB323B2Bb85a129d00B0AC
  Network:      Base (Tenderly Virtual TestNet â€” real Uniswap V3 pools)

  [Scene 1] Depositing 0.05 ETH into AegisModule treasury...
  â€º cast send AegisModule 'depositETH()' --value 0.05ether
  âœ… 0.05 ETH deposited. Treasury is live.
  â„¹ï¸  Treasury balance (raw wei): 0x00000000000000000000000000000000000000000000000000b1a2bc2ec50000
  [Scene 2] Subscribing NEXUS (the AI agent) with a 0.05 ETH budget...
  â€º cast send AegisModule 'subscribeAgent(address,uint256)' <NEXUS> 50000000000000000
  âœ… NEXUS subscribed with 0.05 ETH budget!
  â„¹ï¸  NEXUS on-chain budget: 0x00000000000000000000000000000000000000000000000000b1a2bc2ec50000 (raw wei = 0.05 ETH)
  [Scene 3] NEXUS submits trade intent for BRETT (Base)...
  â€º cast send AegisModule 'requestAudit(address)' <BRETT 0x532f...>
  âœ… AuditRequested event emitted on-chain!
  â„¹ï¸  Token: 0x532f27101965dd16442E59d40670FaF5eBB142E4 (BRETT (Base))
  â„¹ï¸  Tx Hash: 0xb23dc3611f544625d7af66c85a1c178d0196a95b8ec0cfcf37b7782421f02d66
  â„¹ï¸  Tenderly explorer: https://virtual.base.eu.rpc.tenderly.co/2598f75a-1c3a-4772-8c10-43d29099b8d1/tx/0xb23dc3611f544625d7af66c85a1c178d0196a95b8ec0cfcf37b7782421f02d66

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ğŸ”— CHAINLINK CRE â€” WASM SANDBOX OUTPUT
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  â€º docker exec aegis-oracle-node bash -c "cd /app && cre workflow simulate /app --evm-tx-hash 0xb23dc3611f544625d7af66c85a1c178d0196a95b8ec0cfcf37b7782421f02d66 --evm-event-index 0 --non-interactive --trigger-index 0 -R /app -T tenderly-fork 2>&1"

  â”Œâ”€ BEGIN RAW CRE OUTPUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  Initializing...
  Checking RPC connectivity...
  Compiling workflow...
  âœ“ Workflow compiled
  Fetching transaction receipt for 0xb23dc3611f544625d7af66c85a1c178d0196a95b8ec0cfcf37b7782421f02d66...
  2026-02-27T17:45:41Z [SIMULATION] Simulator Initialized
  
  2026-02-27T17:45:41Z [SIMULATION] Running trigger trigger=evm:ChainSelector:15971525489660198786@1.0.0
  2026-02-27T17:45:41Z [USER LOG] ğŸ›¡ï¸ AegisModule V4 | AuditRequested intercepted
  2026-02-27T17:45:41Z [USER LOG] ğŸ›¡ï¸ AEGIS MODULE V4 | Auditing: 0x532f27101965dd16442e59d40670faf5ebb142e4
  2026-02-27T17:45:41Z [USER LOG] __GOPLUS_START__
  2026-02-27T17:45:41Z [USER LOG] [GoPlus] Authenticating with ConfidentialHTTPClient (APP_KEY stays in DON)...
  2026-02-27T17:45:42Z [USER LOG] [GoPlus] JWT acquired â€” AEGIS_GOPLUS_KEY stays inside the Decentralized Oracle Network
  2026-02-27T17:45:42Z [USER LOG] [GoPlus] Fetching token_security for 0x532f27101965dd16442e59d40670faf5ebb142e4 (auth=false) via ConfidentialHTTPClient
  2026-02-27T17:45:42Z [USER LOG] [GoPlus] HTTP 200
  2026-02-27T17:45:42Z [USER LOG] [GoPlus] unverified=0 sellRestriction=0 honeypot=0 proxy=0
  2026-02-27T17:45:42Z [USER LOG] [BaseScan] ConfidentialHTTPClient â†’ BaseScan for 0x532f27101965dd16442e59d40670faf5ebb142e4
  2026-02-27T17:45:42Z [USER LOG] [BaseScan] AEGIS_BASESCAN_SECRET stays inside the Decentralized Oracle Network
  2026-02-27T17:45:43Z [USER LOG] [BaseScan] HTTP 200 â€” key never left DON
  2026-02-27T17:45:43Z [USER LOG] [BaseScan] Contract: BrettToken | 52963 chars of Solidity
  2026-02-27T17:45:43Z [USER LOG] [BaseScan] Proxy=0 | Compiler=v0.8.17+commit.8df45f5f
  2026-02-27T17:45:43Z [USER LOG] [BaseScan] Source truncated to 15000 chars for AI input
  2026-02-27T17:45:43Z [USER LOG] [BaseScan] Sending 15000 chars to AI models
  2026-02-27T17:45:43Z [USER LOG] [AI] Contract under audit: BrettToken
  2026-02-27T17:45:43Z [USER LOG] [AI] Prompt sent to AI (first 400 chars): You are the Aegis Protocol Lead Security Auditor for a DeFi firewall. Analyze this ERC-20 token contract for MALICIOUS patterns ONLY.
  
  Return ONLY a valid JSON object with these exact boolean keys plus a reasoning string:
    obfuscatedTax: TRUE only if there is a hidden fee >  5% deducted inside _transfer/_update that is NOT clearly named 'tax' or 'fee'. Standard Ownable, renounceOwnership, or roya
  2026-02-27T17:45:43Z [USER LOG] [AI] â†’ GPT-4o via ConfidentialHTTPClient | AEGIS_OPENAI_SECRET stays in DON
  2026-02-27T17:45:46Z [USER LOG] [GPT-4o] HTTP 200
  2026-02-27T17:45:46Z [USER LOG] [GPT-4o] Response: {"obfuscatedTax": false, "privilegeEscalation": false, "externalCallRisk": false, "logicBomb": false, "reasoning": "The contract uses standard OpenZeppelin ERC-20 and Ownable patterns without any hidden fees, backdoors, or unguarded external calls."}
  2026-02-27T17:45:46Z [USER LOG] [GPT-4o] Risk bits â†’ tax=false priv=false extCall=false bomb=false
  2026-02-27T17:45:46Z [USER LOG] [GPT-4o] Reasoning: The contract uses standard OpenZeppelin ERC-20 and Ownable patterns without any hidden fees, backdoors, or unguarded external calls.
  2026-02-27T17:45:46Z [USER LOG] [AI] â†’ Llama-3 via Groq ConfidentialHTTPClient | AEGIS_GROQ_SECRET stays in DON
  2026-02-27T17:45:47Z [USER LOG] [Llama-3] HTTP 200
  2026-02-27T17:45:47Z [USER LOG] [Llama-3] Response: {
    "obfuscatedTax": false,
     "privilegeEscalation": false,
     "externalCallRisk": false,
     "logicBomb": false,
     "reasoning": "No malicious patterns found in the provided ERC-20 token contract."
  }
  2026-02-27T17:45:47Z [USER LOG] [Llama-3] Risk bits â†’ tax=false priv=false extCall=false bomb=false
  2026-02-27T17:45:47Z [USER LOG] [Llama-3] Reasoning: No malicious patterns found in the provided ERC-20 token contract.
  2026-02-27T17:45:47Z [USER LOG] [AI] Union of Fears â†’ obfuscatedTax=0 privilegeEscalation=0 externalCallRisk=0 logicBomb=0
  2026-02-27T17:45:47Z [USER LOG] âš–ï¸ Final Risk Code: 0
  2026-02-27T17:45:48Z [USER LOG] âœ… onReport delivered to AegisModule at 0x46d40e0aBdA0814bb0CB323B2Bb85a129d00B0AC
  
  âœ“ Workflow Simulation Result:
  "Audit Complete"
  
  2026-02-27T17:45:48Z [SIMULATION] Execution finished signal received
  2026-02-27T17:45:48Z [SIMULATION] Skipping WorkflowEngineV2
  
  âš ï¸  Update available! Youâ€™re running 1.1.0, but 1.2.0 is the latest.
  Run `cre update` or visit https://github.com/smartcontractkit/cre-cli/releases to upgrade.
  
  â””â”€ END RAW CRE OUTPUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸ“¡ CRE oracle returned Risk Code: 0
  ğŸ“ Committing oracle verdict on-chain via onReportDirect...
  âœ… Oracle verdict committed: riskCode=0 tradeId=0 for BRETT (Base)
  [Scene 5] Reading on-chain verdict for BRETT (Base)...
  â€º cast call AegisModule 'isApproved(address)' <BRETT (Base)>

  âœ… isApproved[BRETT (Base)] = TRUE
  ğŸ›¡ï¸  BRETT cleared â€” real swap would proceed.
     (BRETT has no sell-tax, no honeypot â€” fully clean.)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ DEMO 1 COMPLETE â€” CHAINLINK CRE ORACLE VERIFIED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    âœ… AuditRequested emitted on-chain
    âœ… CRE WASM sandbox activated by EVM log trigger
    âœ… Phase 1: GoPlus static analysis (BFT node-mode consensus)
    ğŸ” Phase 2: BaseScan via ConfidentialHTTPClient
       API key NEVER left the Decentralized Oracle Network
    ğŸ¤– Phase 3: GPT-4o + Llama-3 dual AI consensus
       Both models read the real BRETT contract source
       Union of Fears: blocked if EITHER model flags a risk
    âœ… onReport delivered via Chainlink KeystoneForwarder
    âœ… isApproved[BRETT] read on-chain â€” verdict is immutable
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

